(self.webpackChunkstl_emporium=self.webpackChunkstl_emporium||[]).push([[5895],{3101:(X,C,t)=>{"use strict";t.d(C,{G4:()=>$,Te:()=>ct});var e=t(92686),r=t(67294),l=t(51435),L=t(57557),c=t.n(L),f=t(96854);const T=(M,g)=>({...M,fieldsToPick:g});var D=t(18172),R=t(78718),j=t.n(R),O=t(36968),u=t.n(O),y=t(98601),E=t.n(y);const Z={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},n=(M,g)=>(0,D.ZP)(M,v=>{switch(g.type){case"GET_DATA_SUCCEEDED":{v.isLoading=!1,v.showHeaderLoader=!1,v.initialData=j()(g.data,M.fieldsToPick),v.modifiedData=j()(g.data,M.fieldsToPick);break}case"ON_CANCEL":{v.modifiedData=M.initialData,v.formErrors={};break}case"ON_CHANGE":{g.inputType==="password"&&!g.value?E()(v.modifiedData,g.keys.split(".")):g.keys.includes("username")&&!g.value?u()(v.modifiedData,g.keys.split("."),null):u()(v.modifiedData,g.keys.split("."),g.value);break}case"ON_SUBMIT":{v.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{v.initialData=j()(g.data,M.fieldsToPick),v.modifiedData=j()(g.data,M.fieldsToPick),v.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{v.formErrors=g.errors,v.showHeaderButtonLoader=!1;break}default:return v}}),$=(M,g,v,q)=>{const[{formErrors:K,initialData:ut,isLoading:b,modifiedData:Y,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q]=(0,r.useReducer)(n,Z,()=>T(Z,q)),U=(0,l.lm)(),{lockApp:ot,unlockApp:xt}=(0,l.o1)(),{get:Lt,put:ht}=(0,l.kY)();return(0,r.useEffect)(()=>{M&&(async()=>{try{const{data:{data:W}}=await Lt(M);Q({type:"GET_DATA_SUCCEEDED",data:W,fieldsToPick:q})}catch(W){console.error(W.response),U({type:"warning",message:{id:"notification.error"}})}})()},[M]),[{formErrors:K,initialData:ut,isLoading:b,modifiedData:Y,showHeaderButtonLoader:nt,showHeaderLoader:mt},Q,{handleCancel:()=>{Q({type:"ON_CANCEL"})},handleChange:({target:{name:_,value:W,type:A}})=>{Q({type:"ON_CHANGE",inputType:A,keys:_,value:W})},handleSubmit:async _=>{_.preventDefault();const W=await(0,f.R6)(Y,g);if(Q({type:"SET_ERRORS",errors:W||{}}),!W)try{ot(),Q({type:"ON_SUBMIT"});const A=c()(Y,["confirmPassword","registrationToken"]);A.roles&&(A.roles=A.roles.map(gt=>gt.id)),A.ssoLockedRoles&&(A.ssoLockedRoles=[...new Set(A.ssoLockedRoles)]);const{data:{data:G}}=await ht(M,A);v(G),Q({type:"ON_SUBMIT_SUCCEEDED",data:G}),U({type:"success",message:{id:"notification.success.saved"}})}catch(A){const G=A?.response?.payload??{data:{}};G?.data&&typeof G.data=="string"?U({type:"warning",message:G.data}):U({type:"warning",message:G.message});const gt=(0,f.Iz)(G);Q({type:"SET_ERRORS",errors:gt})}finally{xt()}},setField:(_,W)=>{Q({type:"ON_CHANGE",keys:_,value:W})}}]};var et=t(86706),st=t(36364),rt=t(48232);const ft={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"}],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"}]},H=M=>M.map(g=>{const v=g.links.map(q=>({...q,isDisplayed:!1}));return{...g,links:v}});var at=t(89734),V=t.n(at);const vt=M=>V()(M,g=>g.id),ct=()=>{const[{isLoading:M,menu:g},v]=(0,r.useState)({isLoading:!0,menu:[]}),{allPermissions:q}=(0,l.vn)(),{shouldUpdateStrapi:K}=(0,l.L7)(),{settings:ut}=(0,l.j1)(),b=(0,et.v9)(st._),{global:Y,admin:nt}=(0,rt.c)(ft,async()=>(await t.e(3683).then(t.bind(t,53683))).LINKS_EE,{combine(U,ot){return{admin:[...ot.admin,...U.admin],global:[...U.global,...ot.global]}},defaultValue:{admin:[],global:[]}}),mt=(0,r.useCallback)(U=>{if(!U.id)throw new Error("The settings menu item must have an id attribute.");return{...U,permissions:b.settings?.[U.id]?.main}},[b.settings]);(0,r.useEffect)(()=>{const U=async()=>{const Ct=await(yt=>Promise.all(yt.reduce((it,Et,_)=>{const W=A=>A.map(async(G,gt)=>({hasPermission:await(0,l.qX)(q,G.permissions),sectionIndex:_,linkIndex:gt}));return[...it,...W(Et.links)]},[])))(Lt);v(yt=>({...yt,isLoading:!1,menu:Lt.map((it,Et)=>({...it,links:it.links.map((_,W)=>{const A=Ct.find(G=>G.sectionIndex===Et&&G.linkIndex===W);return{..._,isDisplayed:Boolean(A.hasPermission)}})}))}))},{global:ot,...xt}=ut,Lt=H([{...ut.global,links:vt([...ut.global.links,...Y.map(mt)]).map(ht=>({...ht,hasNotification:ht.id==="000-application-infos"&&K}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:nt.map(mt)},...Object.values(xt)]);U()},[nt,Y,q,ut,K,mt]);const Q=U=>({...U,links:U.links.filter(ot=>ot.isDisplayed)});return{isLoading:M,menu:g.map(Q)}}},92686:(X,C,t)=>{"use strict";t.d(C,{G:()=>L});var e=t(67294),r=t(51435),l=t(88767);function L(){const{get:c}=(0,r.kY)(),{formatAPIError:f}=(0,r.So)(),h=(0,r.lm)(),T=(0,l.useQueries)(["components","content-types"].map(y=>({queryKey:["content-manager",y],async queryFn(){const{data:{data:E}}=await c(`/content-manager/${y}`);return E},onError(E){h({type:"warning",message:f(E)})}}))),[D,R]=T,j=D.isLoading||R.isLoading,O=e.useMemo(()=>(R?.data??[]).filter(y=>y.kind==="collectionType"&&y.isDisplayed),[R?.data]),u=e.useMemo(()=>(R?.data??[]).filter(y=>y.kind!=="collectionType"&&y.isDisplayed),[R?.data]);return{isLoading:j,components:e.useMemo(()=>D?.data??[],[D?.data]),collectionTypes:O,singleTypes:u}}},39223:(X,C,t)=>{"use strict";t.r(C),t.d(C,{SettingsPage:()=>xe});var e=t(67294),r=t(71590),l=t(51435),L=t(64593),c=t(86896),f=t(16550),h=t(3101),T=t(48232),D=t(95187),R=t(14155),j=t(56233),O=t(71603),u=t(61499),y=t(21660),E=t(36636),Z=t(45697),n=t.n(Z),N=t(73727);const $=({menu:s})=>{const{formatMessage:o}=(0,c.Z)(),{trackUsage:i}=(0,l.rS)(),{pathname:a}=(0,f.TH)(),S=s.filter(m=>!m.links.every(d=>d.isDisplayed===!1)).map(m=>({...m,title:m.intlLabel,links:m.links.map(d=>({...d,title:d.intlLabel,name:d.id}))})),P=o({id:"global.settings",defaultMessage:"Settings"}),x=(m=null)=>{i("willNavigate",{from:a,to:m})};return e.createElement(j.m,{ariaLabel:P},e.createElement(O.p,{label:P}),e.createElement(u.Z,null,S.map(m=>e.createElement(y.D,{key:m.id,label:o(m.intlLabel)},m.links.map(d=>e.createElement(E.E,{as:N.OL,withBullet:d.hasNotification,to:d.to,onClick:()=>x(d.to),key:d.id},o(d.intlLabel)))))))};$.propTypes={menu:n().array.isRequired};const et=$,st=[{async Component(){return await t.e(3455).then(t.bind(t,7513))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,25545))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,25545))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,63727))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(5199).then(t.bind(t,87901))},to:"/settings/users",exact:!0},{async Component(){return await t.e(4263).then(t.bind(t,93552))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,71589))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,10372))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4121).then(t.bind(t,38402))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(8056).then(t.bind(t,71362))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(2458),t.e(4299)]).then(t.bind(t,1880))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(2458),t.e(92)]).then(t.bind(t,50955))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(3467),t.e(4816)]).then(t.bind(t,81524))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(9600).then(t.bind(t,68446))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(3467),t.e(2492)]).then(t.bind(t,63252))},to:"/settings/transfer-tokens/:id",exact:!0}];var rt=t(40720),ft=t(74863),dt=t(90731),H=t(12473),at=t(34726),V=t(96987),z=t(10574),vt=t(31988),w=t(6498),ct=t(29824),M=t(18226),g=t(62577),v=t(88767),q=t(86706),K=t(83171),ut=t(36364),b=t(16607);const Y=750,nt=100,mt=["image/jpeg","image/png","image/svg+xml"];var Q=t(87385),U=t(7677),ot=t(96208),xt=t(68020),Lt=t(83598),ht=t(75975),Ct=t(74622),yt=t(36854),it=t(18172);const Et={localImage:void 0},W=(s=Et,o)=>(0,it.ZP)(s,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}}),A=({onChangeLogo:s,customLogo:o,goTo:i,Component:a,modalTitle:p,next:S,prev:P,currentStep:x})=>{const[{localImage:m},d]=(0,e.useReducer)(W,Et),{formatMessage:F}=(0,c.Z)(),I=k=>{d({type:"SET_LOCAL_IMAGE",value:k})},J=()=>{i(null)};return x?e.createElement(Ct.P,{labelledBy:"modal",onClose:J},e.createElement(yt.x,null,e.createElement(z.Z,{fontWeight:"bold",as:"h2",id:"modal"},F(p))),e.createElement(a,{setLocalImage:I,goTo:i,next:S,prev:P,onClose:J,asset:m||o,onChangeLogo:s})):null};A.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},A.propTypes={Component:n().elementType,currentStep:n().string,customLogo:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}),goTo:n().func.isRequired,modalTitle:n().shape({id:n().string,defaultMessage:n().string}),next:n().string,onChangeLogo:n().func.isRequired,prev:n().string};const G=A,gt={currentStep:void 0},Kt=(s=gt,o)=>(0,it.ZP)(s,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}});var Gt=t(98948),Mt=t(91788),Ht=t(26910),St=t(94955),Vt=t(45094),bt=t(78048),Yt=t(85200),Qt=t(61456),Tt=t(37022),Xt=t(73734),Jt=t(1565);const kt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},jt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},wt=s=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){o({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(s)}),qt=(s,o)=>({ext:s.name.split(".").pop(),size:s.size/1e3,name:s.name,url:URL.createObjectURL(s),rawFile:s,width:o.width,height:o.height}),zt=async s=>{let o;if(!mt.includes(s.type))throw o=new Error("File format"),o.displayMessage=kt,o;const a=await wt(s);if(!(a.width<=Y&&a.height<=Y))throw o=new Error("File sizing"),o.displayMessage=jt,o;const S=qt(s,a);if(!(S.size<=nt))throw o=new Error("File sizing"),o.displayMessage=jt,o;return S},_t=(0,Jt.default)(Vt._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Rt=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:p}=(0,c.Z)(),[S,P]=(0,e.useState)(!1),[x,m]=(0,e.useState)(void 0),d=(0,e.useRef)(null),F=()=>P(!0),I=()=>P(!1),J=lt=>{lt.preventDefault(),d.current.click()},k=async()=>{I();const lt=d.current.files[0];if(lt)try{const pt=await zt(lt);s(pt),o(i)}catch(pt){if(pt.displayMessage)m(p(pt.displayMessage,{size:nt,dimension:Y})),d.current.focus();else throw pt}},tt=()=>S?"primary500":x?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(bt.g,{name:"logo-upload",error:x},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(V.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:S?"primary100":"neutral100",borderColor:tt(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:F,onDragLeave:I},e.createElement(Yt.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Xt.Z,"aria-hidden":!0}),e.createElement(b.x,{paddingTop:3,paddingBottom:5},e.createElement(z.Z,{variant:"delta",as:"span"},p({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(_t,{accept:mt,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:k,ref:d,id:"logo-upload"}),e.createElement(H.z,{type:"button",onClick:J},p({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(b.x,{paddingTop:6},e.createElement(z.Z,{variant:"pi",textColor:"neutral600"},p({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:nt,dimension:Y})))),e.createElement(Qt.c,null)))))),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:a,variant:"tertiary"},p({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Rt.defaultProps={next:null},Rt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const te=Rt;var ee=t(38670);const ne=async s=>{try{const{get:o}=(0,l.tg)(),i=await o(s,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}},Dt=({goTo:s,next:o,onClose:i,setLocalImage:a})=>{const{formatMessage:p}=(0,c.Z)(),[S,P]=(0,e.useState)(""),[x,m]=(0,e.useState)(null),d=I=>{P(I.target.value)},F=async()=>{try{const I=await ne(S),J=await zt(I);a(J),s(o)}catch(I){if(I.displayMessage)m(p(I.displayMessage,{size:nt,dimension:Y}));else throw I}};return e.createElement("form",{onSubmit:I=>{I.preventDefault(),F()}},e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ee.o,{label:p({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:x,onChange:d,value:S,name:"logo-url"})),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:i,variant:"tertiary"},p({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(H.z,{type:"submit"},p({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Dt.defaultProps={next:null},Dt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const oe=Dt,Ot=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:p}=(0,c.Z)();return e.createElement(Gt.v,{label:p({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(b.x,{paddingLeft:8,paddingRight:8},e.createElement(Mt.m,null,e.createElement(Mt.O,null,p({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(Mt.O,null,p({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Ht.i,null)),e.createElement(St.n,null,e.createElement(St.x,null,e.createElement(te,{onClose:a,setLocalImage:s,goTo:o,next:i})),e.createElement(St.x,null,e.createElement(oe,{onClose:a,setLocalImage:s,goTo:o,next:i}))))};Ot.defaultProps={next:null},Ot.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const se=Ot;var ae=t(16244),ie=t(60909),le=t(26611),re=t(37255),de=t(19700),Ut=t(56457),ce=t(1136);const Ft=({asset:s})=>{const{formatMessage:o}=(0,c.Z)();return e.createElement(ae.Z,null,e.createElement(ie.O,null,e.createElement(le.H,{size:"S",src:s.url})),e.createElement(re.e,null,e.createElement(de.a,null,e.createElement(Ut.l,null,s.name),e.createElement(Ut._,null,`${s.ext.toUpperCase()} - ${s.width}\u2715${s.height}`)),e.createElement(ce.E,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Ft.propTypes={asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired};const ue=Ft,Pt=({onClose:s,asset:o,prev:i,next:a,goTo:p,setLocalImage:S,onChangeLogo:P})=>{const{formatMessage:x}=(0,c.Z)(),m=()=>{S(void 0),p(i)},d=()=>{P(o),p(a)};return e.createElement(e.Fragment,null,e.createElement(b.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(V.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(V.k,{direction:"column",alignItems:"flex-start"},e.createElement(z.Z,{variant:"pi",fontWeight:"bold"},x({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(z.Z,{variant:"pi",textColor:"neutral500"},x({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(H.z,{onClick:m,variant:"secondary"},x({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(b.x,{maxWidth:(0,l.Q1)(180)},o.url?e.createElement(ue,{asset:o}):null)),e.createElement(Tt.m,{startActions:e.createElement(H.z,{onClick:s,variant:"tertiary"},x({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(H.z,{onClick:d},x({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Pt.defaultProps={next:null,prev:null},Pt.propTypes={goTo:n().func.isRequired,asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired,next:n().string,onClose:n().func.isRequired,onChangeLogo:n().func.isRequired,prev:n().string,setLocalImage:n().func.isRequired};const me={upload:{Component:se,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},It=({canUpdate:s,customLogo:o,defaultLogo:i,hint:a,label:p,onChangeLogo:S,onResetLogo:P})=>{const[{currentStep:x},m]=(0,e.useReducer)(Kt,gt),{Component:d,next:F,prev:I,modalTitle:J}=me[x]||{},{formatMessage:k}=(0,c.Z)(),tt=lt=>{m({type:"GO_TO",to:lt})};return e.createElement(e.Fragment,null,e.createElement(Q.F,{label:p,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(U.b,null,e.createElement(ot.h,{disabled:!s,onClick:()=>tt(o?"pending":"upload"),label:k({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(Lt.Z,null)}),o&&e.createElement(ot.h,{disabled:!s,onClick:P,label:k({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(ht.Z,null)}))},e.createElement(xt.q,{label:k({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(b.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:k({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(G,{Component:d,currentStep:x,onChangeLogo:S,customLogo:o,goTo:tt,next:F,prev:I,modalTitle:J}))};It.defaultProps={canUpdate:!1,customLogo:null,hint:null},It.propTypes={canUpdate:n().bool,customLogo:n().shape({url:n().string,name:n().string}),label:n().string.isRequired,hint:n().string,defaultLogo:n().string.isRequired,onChangeLogo:n().func.isRequired,onResetLogo:n().func.isRequired};const Zt=It;var ge=t(82492),pe=t.n(ge);const fe=(s,o)=>pe()(s,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}}),At={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},he=(s=At,o)=>(0,it.ZP)(s,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Bt=(0,e.forwardRef)(({canUpdate:s,projectSettingsStored:o},i)=>{const{formatMessage:a}=(0,c.Z)(),{trackUsage:p}=(0,l.rS)(),{logos:{menu:S,auth:P}}=(0,K.m)(),[{menuLogo:x,authLogo:m},d]=(0,e.useReducer)(he,At,()=>fe(At,o)),F=tt=>{d({type:"SET_CUSTOM_MENU_LOGO",value:tt})},I=()=>{p("didClickResetLogo",{logo:"menu"}),d({type:"RESET_CUSTOM_MENU_LOGO"})},J=tt=>{d({type:"SET_CUSTOM_AUTH_LOGO",value:tt})},k=()=>{p("didClickResetLogo",{logo:"auth"}),d({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:x.submit,authLogo:m.submit})})),e.createElement(b.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(z.Z,{variant:"delta",as:"h3"},a({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(z.Z,{variant:"pi",textColor:"neutral600"},a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:Y,size:nt})),e.createElement(vt.r,{paddingTop:4,gap:4},e.createElement(w.P,{col:6,s:12},e.createElement(Zt,{canUpdate:s,customLogo:x.display,defaultLogo:S.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:F,onResetLogo:I})),e.createElement(w.P,{col:6,s:12},e.createElement(Zt,{canUpdate:s,customLogo:m.display,defaultLogo:P.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:J,onResetLogo:k}))))});Bt.defaultProps={canUpdate:!1,projectSettingsStored:null},Bt.propTypes={canUpdate:n().bool,projectSettingsStored:n().shape({menuLogo:n().shape({url:n().string,name:n().string})})};const Ee=Bt,ve=s=>{const o=new FormData;return Object.entries(s).forEach(([i,a])=>{a&&a.rawFile instanceof File&&o.append(i,a.rawFile),a&&a.isReset&&o.append(i,null)}),o},Le=()=>null,ye=()=>{const s=e.useRef(),o=(0,l.lm)(),{trackUsage:i}=(0,l.rS)(),{formatMessage:a}=(0,c.Z)(),{get:p,post:S}=(0,l.kY)(),{updateProjectSettings:P}=(0,K.m)(),x=(0,q.v9)(ut._),{formatAPIError:m}=(0,l.So)(),{communityEdition:d,latestStrapiReleaseTag:F,nodeVersion:I,shouldUpdateStrapi:J,strapiVersion:k}=(0,l.L7)(),tt=(0,T.c)(Le,async()=>(await t.e(5013).then(t.bind(t,65013))).AdminSeatInfoEE),{allowedActions:{canRead:lt,canUpdate:pt}}=(0,l.ss)(x.settings["project-settings"]);(0,l.go)();const{data:Nt,isLoading:Ce}=(0,v.useQuery)(["project-settings"],async()=>{const{data:B}=await p("/admin/project-settings");return B},{cacheTime:0,enabled:lt,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,l.CR)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,l.CR)(B.menuLogo.url)}:B.menuLogo}}}),Me=(0,v.useMutation)(B=>S("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){o({type:"warning",message:m(B)})},async onSuccess(B){const{menuLogo:Wt,authLogo:$t}=B;P({menuLogo:Wt?.url,authLogo:$t?.url}),Wt?.rawFile&&i("didChangeLogo",{logo:"menu"}),$t?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),Se=B=>{B.preventDefault(),Me.mutate(ve(s.current.getValues()))};return tt?e.createElement(r.A,null,e.createElement(l.SL,{name:"Application"}),e.createElement(rt.o,null,Ce?e.createElement(ft.a,null,a({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:Se},e.createElement(dt.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:pt&&e.createElement(H.z,{type:"submit",startIcon:e.createElement(M.Z,null)},a({id:"global.save",defaultMessage:"Save"}))}),e.createElement(at.D,null,e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(V.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(z.Z,{variant:"delta",as:"h3"},a({id:"global.details",defaultMessage:"Details"})),e.createElement(vt.r,{gap:5,as:"dl"},e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(V.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(z.Z,null,"v",k),J&&e.createElement(ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${F}`,isExternal:!0,endIcon:e.createElement(g.Z,null)},a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(V.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(z.Z,null,a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:d})),e.createElement(ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(g.Z,null)},a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(w.P,{col:6,s:12},e.createElement(z.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(z.Z,{as:"dd"},I)),e.createElement(tt,null))),lt&&Nt&&e.createElement(Ee,{canUpdate:pt,ref:s,projectSettingsStored:Nt})))))):null};function xe(){const{settingId:s}=(0,f.UO)(),{settings:o}=(0,l.j1)(),{formatMessage:i}=(0,c.Z)(),{isLoading:a,menu:p}=(0,h.Te)(),S=(0,T.c)(st,async()=>(await t.e(1470).then(t.bind(t,51470))).ROUTES_EE,{combine(m,d){return[...m,...d]},defaultValue:[]}),P=e.useMemo(()=>(0,R.Z)(S.map(({to:m,Component:d,exact:F})=>(0,D.Z)(d,m,F))),[S]),x=Object.values(o).flatMap(m=>{const{links:d}=m;return d.map(F=>(0,D.Z)(F.Component,F.to,F.exact||!1))});return a?e.createElement(l.dO,null):s?e.createElement(r.A,{sideNav:e.createElement(et,{menu:p})},e.createElement(L.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement(f.rs,null,e.createElement(f.AW,{path:"/settings/application-infos",component:ye,exact:!0}),P,x)):e.createElement(f.l_,{to:"/settings/application-infos"})}},98601:(X,C,t)=>{var e=t(57406);function r(l,L){return l==null?!0:e(l,L)}X.exports=r},71590:(X,C,t)=>{"use strict";t.d(C,{A:()=>f});var e=t(85893),r=t(1565),l=t(16607);const L=(0,r.default)(l.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:h})=>h?"auto 1fr":"1fr"};
`,c=(0,r.default)(l.x)`
  overflow-x: hidden;
`,f=({sideNav:h,children:T})=>(0,e.jsxs)(L,{hasSideNav:Boolean(h),children:[h,(0,e.jsx)(c,{paddingBottom:10,children:T})]})},29824:(X,C,t)=>{"use strict";t.d(C,{r:()=>j});var e=t(85893),r=t(67294),l=t(62577),L=t(73727),c=t(1565),f=t(66362),h=t(10574),T=t(16607);const D=c.default.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:O})=>O?"none":void 0};
  color: ${({disabled:O,theme:u})=>O?u.colors.neutral600:u.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${h.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:O})=>O.colors.primary500};
  }

  &:active {
    color: ${({theme:O})=>O.colors.primary700};
  }

  ${f.BF};
`,R=(0,c.default)(T.x)`
  display: flex;
`,j=r.forwardRef(({children:O,href:u,to:y,disabled:E=!1,startIcon:Z,endIcon:n,...N},$)=>{const et=u?"_blank":void 0,st=u?"noreferrer noopener":void 0;return(0,e.jsxs)(D,{as:y&&!E?L.OL:"a",target:et,rel:st,to:E?void 0:y,href:E?"#":u,disabled:E,ref:$,...N,children:[Z&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingRight:2,children:Z}),(0,e.jsx)(h.Z,{children:O}),n&&!u&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:n}),u&&(0,e.jsx)(R,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(l.Z,{})})]})})},56233:(X,C,t)=>{"use strict";t.d(C,{m:()=>f});var e=t(85893),r=t(1565),l=t(31988);const L=`${232/16}rem`,c=(0,r.default)(l.r)`
  width: ${L};
  background: ${({theme:h})=>h.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:h})=>h.colors.neutral200};
  z-index: 1;
`,f=({ariaLabel:h,...T})=>(0,e.jsx)(c,{"aria-label":h,as:"nav",...T})},71603:(X,C,t)=>{"use strict";t.d(C,{p:()=>Z});var e=t(85893),r=t(67294),l=t(90272),L=t(1565),c=t(40840),f=t(92058);const h=n=>{const N=(0,r.useRef)();return(0,r.useEffect)(()=>{N.current=n}),N.current};var T=t(26910),D=t(16607),R=t(49185),j=t(35987),O=t(96987),u=t(10574),y=t(96208);const E=(0,L.default)(T.i)`
  width: ${24/16}rem;
  background-color: ${({theme:n})=>n.colors.neutral200};
`,Z=({as:n="h2",label:N,searchLabel:$="",searchable:et=!1,onChange:st=()=>{},value:rt="",onClear:ft=()=>{},onSubmit:dt=()=>{},id:H})=>{const[at,V]=(0,r.useState)(!1),z=h(at),vt=(0,f.M)(H),w=(0,r.useRef)(void 0),ct=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{at&&w.current&&w.current.focus(),z&&!at&&ct.current&&ct.current.focus()},[at,z]);const M=()=>{V(K=>!K)},g=K=>{ft(K),w.current.focus()},v=K=>{K.relatedTarget?.id!==vt&&V(!1)},q=K=>{K.key===c.y.ESCAPE&&V(!1)};return at?(0,e.jsxs)(D.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,e.jsx)(R.U,{children:(0,e.jsx)(j.w,{name:"searchbar",value:rt,onChange:st,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:q,ref:w,onBlur:v,onClear:g,onSubmit:dt,clearLabel:"Clear",size:"S",children:$})}),(0,e.jsx)(D.x,{paddingLeft:2,paddingTop:4,children:(0,e.jsx)(E,{})})]}):(0,e.jsxs)(D.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,e.jsxs)(O.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,e.jsx)(u.Z,{variant:"beta",as:n,children:N}),et&&(0,e.jsx)(y.h,{ref:ct,onClick:M,label:$,icon:(0,e.jsx)(l.Z,{})})]}),(0,e.jsx)(D.x,{paddingTop:4,children:(0,e.jsx)(E,{})})]})}},36636:(X,C,t)=>{"use strict";t.d(C,{E:()=>O});var e=t(85893),r=t(67294),l=t(59233),L=t(1565),c=t(16607),f=t(10574),h=t(96987),T=t(53342);const D=(0,L.default)(c.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:u})=>u.colors.neutral800};
  svg > * {
    fill: ${({theme:u})=>u.colors.neutral600};
  }

  &.active {
    ${({theme:u})=>`
      background-color: ${u.colors.primary100};
      border-right: 2px solid ${u.colors.primary600};
      svg > * {
        fill: ${u.colors.primary700};
      }
      ${f.Z} {
        color: ${u.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,R=(0,L.default)(l.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:u,$active:y})=>y?u.colors.primary600:u.colors.neutral600};
  }
`,j=L.default.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,O=r.forwardRef(({children:u,icon:y=null,withBullet:E=!1,as:Z=T.f,isSubSectionChild:n=!1,...N},$)=>(0,e.jsxs)(D,{as:Z,icon:y,background:"neutral100",paddingLeft:n?9:7,paddingBottom:2,paddingTop:2,ref:$,...N,children:[(0,e.jsxs)(h.k,{children:[y?(0,e.jsx)(j,{children:y}):(0,e.jsx)(R,{}),(0,e.jsx)(c.x,{paddingLeft:2,children:(0,e.jsx)(f.Z,{as:"span",children:u})})]}),E&&(0,e.jsx)(c.x,{as:h.k,paddingRight:4,children:(0,e.jsx)(R,{$active:!0})})]}))},21660:(X,C,t)=>{"use strict";t.d(C,{D:()=>y});var e=t(85893),r=t(67294),l=t(1565),L=t(58471),c=t(96987),f=t(16607),h=t(10574);const T=(0,l.default)(c.k)`
  border: none;
  padding: 0;
  background: transparent;
`,D=l.default.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:E})=>E?"0deg":"180deg"});
`,R=({collapsable:E=!1,label:Z,onClick:n=()=>{},ariaExpanded:N,ariaControls:$})=>E?(0,e.jsxs)(T,{as:"button",onClick:n,"aria-expanded":N,"aria-controls":$,textAlign:"left",children:[(0,e.jsx)(f.x,{paddingRight:1,children:(0,e.jsx)(h.Z,{variant:"sigma",textColor:"neutral600",children:Z})}),E&&(0,e.jsx)(D,{rotated:N,children:(0,e.jsx)(L.Z,{"aria-hidden":!0})})]}):(0,e.jsx)(T,{children:(0,e.jsx)(f.x,{paddingRight:1,children:(0,e.jsx)(h.Z,{variant:"sigma",textColor:"neutral600",children:Z})})});var j=t(92058),O=t(18787);const u=(0,l.default)(f.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:E})=>E.colors.neutral500};
    }
  }
`,y=({collapsable:E=!1,label:Z,badgeLabel:n,children:N,id:$})=>{const[et,st]=(0,r.useState)(!0),rt=(0,j.M)($),ft=()=>{st(dt=>!dt)};return(0,e.jsxs)(c.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(u,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,e.jsxs)(f.x,{position:"relative",paddingRight:n?6:0,children:[(0,e.jsx)(R,{onClick:ft,ariaExpanded:et,ariaControls:rt,collapsable:E,label:Z}),n&&(0,e.jsx)(O.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:n})]})}),(!E||et)&&(0,e.jsx)("ol",{id:rt,children:r.Children.map(N,(dt,H)=>(0,e.jsx)("li",{children:dt},H))})]})}},61499:(X,C,t)=>{"use strict";t.d(C,{Z:()=>c});var e=t(85893),r=t(67294),l=t(16607),L=t(96987);const c=({children:f,spacing:h=2,horizontal:T=!1,...D})=>(0,e.jsx)(l.x,{paddingTop:2,paddingBottom:4,children:(0,e.jsx)(L.k,{as:"ol",gap:h,direction:T?"row":"column",alignItems:T?"center":"stretch",...D,children:r.Children.map(f,(R,j)=>(0,e.jsx)("li",{children:R},j))})})},59233:(X,C,t)=>{"use strict";t.d(C,{Z:()=>l});var e=t(85893);const r=L=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...L,children:(0,e.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),l=r}}]);
